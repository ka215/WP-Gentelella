function countChecked(){"all"===checkState&&$(".bulk_action input[name='table_records']").iCheck("check"),"none"===checkState&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var e=$(".bulk_action input[name='table_records']:checked").length;e?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(e+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}!function(e,t){var n=function(e,t,n){var i;return function(){var o=this,a=arguments;i?clearTimeout(i):n&&e.apply(o,a),i=setTimeout(function(){n||e.apply(o,a),i=null},t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)}}(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var e=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),n=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),i=e<n?n:e;i-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",i)};$SIDEBAR_MENU.find("a").on("click",function(t){var n=$(this).parent();if(n.is(".active"))$("ul:first",n).slideUp("fast","swing",function(){n.removeClass("active active-sm"),e()});else{n.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp("fast","swing")),n.addClass("active");var i=$("ul:first",n).children().length,o=i>6?300:50*i;$("ul:first",n).slideDown(o,"linear",function(){e()})}}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?$SIDEBAR_MENU.animate({width:"70px"},50,"linear",function(){$SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")}):$SIDEBAR_MENU.animate({width:"230px"},100,"linear",function(){$SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")}),$BODY.toggleClass("nav-md nav-sm"),e(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){e()}).parent().addClass("active"),$(window).smartresize(function(){e()}),e(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}),$(document).ready(function(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),n=e.find(".x_content");e.attr("style")?n.slideToggle(200,function(){e.removeAttr("style")}):(n.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){$(this).closest(".x_panel").parent().remove()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})}),$(document).ready(function(){$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar()}),$(document).ready(function(){$(".js-switch")[0]&&Array.prototype.slice.call(document.querySelectorAll(".js-switch")).forEach(function(e){new Switchery(e,{color:"#26B99A"})})}),$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(window).on("unload",function(){NProgress.start()}),$(window).on("load",function(){NProgress.done()})),$(document).ready(function(){var e=function(e){var t=document,n=!1;return t.mozFullScreen?t.mozCancelFullScreen&&(t.mozCancelFullScreen(),n=!1):e.mozRequestFullScreen&&(e.mozRequestFullScreen(),n=!0),t.webkitIsFullScreen?t.webkitExitFullscreen&&(t.webkitExitFullscreen(),n=!1):e.webkitRequestFullscreen&&(e.webkitRequestFullscreen(),n=!0),t.fullscreenElement?t.exitFullscreen&&(t.exitFullscreen(),n=!1):e.requestFullscreen&&(e.requestFullscreen(),n=!0),n};$(".sidebar-footer").find("a").on("click",function(){switch($(this).data("originalTitle").toLowerCase()){case"fullscreen":var t=$("body");t.css({width:"100%",height:"100%",overflow:"hidden"});var n=t[0];e(n)?$(this).children("span").attr("class","fa fa-minus-square-o"):(t.css({width:"100%",height:"auto",overflow:"visible"}),$(this).children("span").attr("class","glyphicon glyphicon-fullscreen"))}}),$(".nav.child_menu> li> a").on("click",function(){var e=$(this).parent();e.toggleClass("active"),$("#registerWidget, #transmitClassC").on("hide.bs.modal",function(t){e.removeClass("active"),e.parents("li.active").find("ul").slideUp("fast","swing"),e.parents("li").removeClass("active active-sm")})}),$('.full_col[role="main"]').ready(function(){var e=$(".nav.child_menu> li");e.removeClass("active"),e.parents("li.active").find("ul").hide()}),$(".x_panel").on({mouseenter:function(){$(this).find(".panel_toolbox").removeAttr("hidden")},mouseleave:function(){$(this).find(".panel_toolbox").attr("hidden","hidden")}}),1==$('.right_col> .row> div[class^="col-"]:not(.guidelines)').length&&$(".right_col> .row> div.guidelines").removeAttr("hidden"),$("#registerWidget").on("show.bs.modal",function(e){$(this).find("select option:selected").prop("selected",!1),$('#target-sensors .alert:not([role="template"])').remove(),$("#no-selected-sensor").removeAttr("hidden"),$("#view-type").prop("disabled",!0),$('p.helper-text[id^="desc-"]').attr("hidden","hidden"),$(".toggled-option").hide(),$("#in-realtime").iCheck("disable"),$(".colorpicker-component").colorpicker(),$("#text-to-match").select2({placeholder:"Enter text to match",width:"100%",tags:!0,tokenSeparators:[","," ",";","\n"],allowClear:!0});var t=$.trim($(e.relatedTarget).text());$(this).find("#view-type> option").each(function(){t===$.trim($(this).text())?$(this).prop("selected",!0):$(this).prop("selected",!1)})}),$("#transmitClassC").on("show.bs.modal",function(e){"multicast"===e.relatedTarget.id?$(this).find("#multicast-opt1").show():$(this).find("#multicast-opt1").hide()})}),$(document).ready(function(){function e(){var e=[];return $('#target-sensors> .alert:not([role="template"])').each(function(){e.push($(this).find(".sensor-name").text())}),e.length>0}function t(){$("#view-type").prop("disabled",!e())}function n(e){switch($('p.helper-text[id^="desc-"]').attr("hidden","hidden"),$(".toggled-option").hide(),e){case"table":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show();break;case"line":case"bar":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show(),$("#axis-on-graph").show();break;case"text":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show();break;case"switch":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show(),$("#switch-onoff").show();break;case"map":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show();break;case"table_summary":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show(),$("#summary-data-type").show();break;case"line_summary":case"bar_summary":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show(),$("#axis-on-graph").show(),$("#summary-data-type").show();break;case"pie_summary":$("#desc-"+e).removeAttr("hidden"),$("#period-to-show").show(),$("#summary-data-type").show()}}$("#sensor-groups").on("change",function(e){var t=""===e.target.value;$("#sensor-list").prop("disabled",t)}),$("#search-sensor-keyword").on("click",function(){$("#result-list").prop("disabled",!1)}),$('button[id^="add-sensor-"]').on("click",function(e){e.preventDefault();var i=[],o="",a=[];$('#target-sensors> .alert:not([role="template"])').each(function(){i.push($(this).find(".sensor-name").text())}),"add-sensor-list"===e.target.id?""!==(o=$("#sensor-list").val())&&("all"!==o?a.push(o):$("#sensor-list> option").each(function(){-1==$.inArray($(this).val(),["","all"])&&a.push($(this).val())})):"add-sensor-search"===e.target.id&&""!==(o=$("#result-list").val())&&("all"!==o?a.push(o):$("#result-list> option").each(function(){-1==$.inArray($(this).val(),["","all"])&&a.push($(this).val())})),i=i.filter(function(e,t,n){return n.indexOf(e)===t}),a.forEach(function(e,t,n){if(-1==$.inArray(e,i)){var o=$('#target-sensors> .alert[role="template"]').clone();o.find(".sensor-name").text(e).end().removeAttr("hidden").removeAttr("role"),o.find(".colorpicker-component").colorpicker(),$("#no-selected-sensor").attr("hidden","hidden"),$("#target-sensors").append(o)}}),t(),""!==$("#view-type").val()&&n($("#view-type").val())}),$(document).on("click","#target-sensors> .alert button.close",function(){1==$('#target-sensors> .alert:not([role="template"])').length&&($("#view-type").prop("disabled",!0),$("#no-selected-sensor").removeAttr("hidden"))}),$("#add_matching_text").on("click",function(){var e=$("#text_to_match").val(),t=[];""!==e&&($("#matching_text_list> button").each(function(){t.push($.trim($(this).text()))}),-1==$.inArray(e,t)&&($("#matching_text_list").append('<button type="button" class="btn btn-default btn-sm">'+e+' <i class="fa fa-close"></i></button>'),$("#text_to_match").val("")))}),$(document).on("click","#matching_text_list> button",function(){$(this).fadeOut(150,function(){$(this).remove()})}),$("#view-type").on("change",function(e){n(e.target.value)}),$("#select-data-type> label.btn").on("click",function(e){switch($(this).find("input").val()){case"numric":$("#summary-condition-text").hide(),$("#summary-condition-switch").hide(),$("#summary-condition-number").show();break;case"text":$("#summary-condition-number").hide(),$("#summary-condition-switch").hide(),$("#summary-condition-text").show();break;case"switch":$("#summary-condition-number").hide(),$("#summary-condition-text").hide(),$("#summary-condition-switch").show();break;default:$("#summary-condition-number").hide(),$("#summary-condition-text").hide(),$("#summary-condition-switch").hide()}}),$("#reporting-time").ready(function(){function e(e,t){$("#reporting-time span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}var t=moment().subtract(29,"days"),n=moment();$("#reporting-time").daterangepicker({startDate:t,endDate:n,timePicker:!0,timePickerIncrement:1,alwaysShowCalendars:!0,opens:"center",drops:"up",ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"MM/DD/YYYY h:mm A"}},e),e(t,n),$("#reporting-time").on("apply.daterangepicker",function(e,t){"Custom Range"!==t.chosenLabel?($("#in-realtime-period").text(t.chosenLabel),$("#in-realtime").iCheck("enable").iCheck("check"),$("#reporting-time").attr("readonly",!0)):($("#in-realtime-period").text(""),$("#in-realtime").iCheck("uncheck").iCheck("disable"),$("#reporting-time").attr("readonly",!1))}),$(document).on("ifClicked","#in-realtime",function(e){if(""===$("#in-realtime-period").text())return $(this).iCheck("disable"),!1}),$(document).on("ifUnchecked","#in-realtime",function(e){$("#reporting-time").attr("readonly",!1)})})});